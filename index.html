<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Clinical Decision Support Systems</title>
    <meta charset="utf-8" />
    <meta name="author" content="Rex Parsons" />
    <meta name="date" content="2023-02-22" />
    <script src="libs/header-attrs-2.20/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
    <script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
    <script src="libs/viz-1.8.2/viz.js"></script>
    <link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
    <script src="libs/grViz-binding-1.0.9/grViz.js"></script>
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Clinical Decision Support Systems
]
.subtitle[
## PUB358
]
.author[
### Rex Parsons
]
.date[
### 2023-02-22
]

---




&lt;style type="text/css"&gt;
.imgcenter {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 75%;
}

.remark-container {
  height: 600px!important;
  width: 900px!important;
}

.remark-code {
  font-size: 80%
}

iframebody {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  margin:0;
  overflow: hidden;
  padding: 0;
}
	
iframe {
  height: 100vh;
  width: 100vw;
}

&lt;/style&gt;


## What is a CDSS?

--

### ???

--

.pull-left[
- System that support/improves clinical decisions
- Reduces large amount of information into something digestible
- Communicate that information to the clinician in a way that improves decision making (ideally)
]

.pull-right[
![cdss-1](www/cdss-1.png)
]

---

## What is a CDSS?

#### annalise.ai's chest x-ray decision support

.pull-left[
- Assesses chest x-ray for 124 possible outcomes
- Ranks outcomes and communicates risk to user
- Highlights areas of image that are influential to risk estimate
]

.pull-right[
- clinical prediction model
- reduces/prioritises information
- model interpretation for better decision (?)
]

&lt;p style="text-align:center;"&gt;
  &lt;img src="www/annalise-cxr.gif" height="60%" width = "60%"&gt;
&lt;/p&gt;

---

## What is a CDSS?

#### annalise.ai's chest x-ray decision support

.pull-left[
- **Assesses chest x-ray for 124 possible outcomes**
- **Ranks outcomes and communicates risk to user**
- Highlights areas of image that are influential to risk estimate
]

.pull-right[
- **clinical prediction model**
- **reduces/prioritises information**
- model interpretation for better decision (?)
]

&lt;p style="text-align:center;"&gt;
  &lt;img src="www/annalise-cxr.gif" height="60%" width = "60%"&gt;
&lt;/p&gt;

---

## What is a clinical prediction model?

#### Diagnostic

![diagnostic-test](www/diagnostic-test-covid.png)

---

## What is a clinical prediction model?

#### Prognostic

.pull-left[
![prognostic-test](www/prognostic-crystal-ball.jpg)
]
--
.pull-right[
![prognostic-test](www/prognostic-crystal-ball-mi.jpg)
]

---

## How should outputs from a clinical prediction model be shown?

&lt;center&gt;
<div id="htmlwidget-d67e21970a09eb4272da" style="width:504px;height:450px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-d67e21970a09eb4272da">{"x":{"diagram":"digraph {\n  graph [layout = dot, rankdir = TB]\n  \n  node [shape = oval, fontname = Cabin]        \n  n1 [label = \"Patient data\"]\n  n2 [label = \"Prediction model\"]\n  n3 [label =  \"???\", color=\"red\"]\n  n4 [label = \"PROFIT\n(better value care)\"]\n  \n  # edge definitions with the node IDs\n  n1 -> n2 -> n3 -> n4\n  }","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
&lt;/center&gt;

---

#### annalise.ai's chest x-ray decision support

.pull-left[
- Assesses chest x-ray for 124 possible outcomes
- **Ranks outcomes and communicates risk to user**
- Highlights areas of image that are influential to risk estimate
]

.pull-right[
- clinical prediction model
- **reduces/prioritises information**
- model interpretation for better decision (?)
]

&lt;p style="text-align:center;"&gt;
  &lt;img src="www/annalise-cxr.gif" height="60%" width = "60%"&gt;
&lt;/p&gt;

---

## How should outputs from a clinical prediction model be shown?


*your thoughts?*

--

- Predicted probabilities

--

- Predicted classes (cancer vs no-cancer)

--

- ðŸš¦ Traffic lights or other (ordinal) larger scale


---

## Cutpoints

&lt;center&gt;
<div id="htmlwidget-713e9a23be6300cf9330" style="width:504px;height:450px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-713e9a23be6300cf9330">{"x":{"diagram":"digraph {\n  graph [layout = dot, rankdir = TB]\n  \n  node [shape = oval, fontname = Cabin]        \n  n1 [label = \"Predicted probabilities (between 0 and 1)\"]\n  n2 [label = \"Cutpoint\"]\n  n3 [label =  \"Predicted classes (0 or 1)\"]\n  \n  # edge definitions with the node IDs\n  n1 -> n2 -> n3\n  }","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
&lt;/center&gt;

---

## Cutpoints
.imgcenter[
&lt;img src = "www/sand-2.png", height = "400px"&gt;
]

---

## Cutpoints
.imgcenter[
&lt;img src = "www/sand-3.png", height = "400px"&gt;
]

---

## Cutpoints

&lt;iframebody&gt;
  &lt;iframe src="https://aushsi.shinyapps.io/cost-effective-cpms-app/"  frameborder="0" &lt;/iframe&gt;
&lt;/iframebody&gt;

---

## Optimising cutpoints for clinical decisions

&lt;center&gt;
<div id="htmlwidget-eac82af5fa34e27d8227" style="width:504px;height:450px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-eac82af5fa34e27d8227">{"x":{"diagram":"digraph {\n  graph [layout = dot, rankdir = TB]\n  \n  node [shape = oval, fontname = Cabin]        \n  n1 [label = \"Predicted probabilities (between 0 and 1)\"]\n  n2 [label = \"Cutpoint\"]\n  n3 [label =  \"Predicted classes (0 or 1)\"]\n  n4 [label =  \"(Predicted class = 1)\nPatient recieves intervention\"]\n  n5 [label =  \"(Predicted class = 0)\nPatient recieves no intervention\"]\n  \n  # edge definitions with the node IDs\n  n1 -> n2 -> n3\n  n3 -> {n4, n5}\n  }","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
&lt;/center&gt;


---

## Cutpoint example

#### CDSS for inpatient fall prevention

- Outcome: inpatient fall
- Treatment: patient education
- Cost of outcome: $2000 (considers quality-adjusted life years lost and additional treatment costs)
- Cost of treatment: $50
- Treatment effect: 30% reduction in risk

--


```
##    TP    FP    TN    FN 
## -1450   -50     0 -2000
```

--

- Rate of falls in acute care hospital: 3%
- Prediction model performance: 0.75 AUC

---

&lt;iframebody&gt;
  &lt;iframe src="https://aushsi.shinyapps.io/cost-effective-cpms-app/"  frameborder="0" &lt;/iframe&gt;
&lt;/iframebody&gt;

---

## How do we know whether a CDSS will be useful?

(currently) Evaluate in a clinical trial and perform a health-economic evaluation

(soon) Simulate the model, intervention(s), patients and decisions based on the literature

---

## predictNMB &lt;a href='https://rwparsons.github.io/predictNMB/'&gt;&lt;img src='www/hex.png' align="right" height="139" /&gt;&lt;/a&gt;

- Makes performing this simulation easy
- Allows sensitivity analyses across possible values for prevalence, model performance, treatment effectiveness/costs

---

## predictNMB &lt;a href='https://rwparsons.github.io/predictNMB/'&gt;&lt;img src='www/hex.png' align="right" height="139" /&gt;&lt;/a&gt;

#### Inpatient falls example




````r
library(parallel)
cl &lt;- makeCluster(detectCores())

sim_object &lt;- screen_simulation_inputs(
  n_sims=500, n_valid=10000, 
  sim_auc = seq(0.6, 0.9, 0.05),
  cutpoint_methods = c("all", "none", "youden", "value_optimising"),
  fx_nmb_training = get_nmb, 
  fx_nmb_evaluation = get_nmb,
  event_rate = 0.03,
  cl = cl
)
plot(sim_object)
````

---
&lt;p style="text-align:center;"&gt;
  &lt;img src = "www/sim_screen.jpeg"&gt;
&lt;/p&gt;
---

## Summary

- CDSS should support clinical decisions to be better (&amp;uarr; value care)

--

- Objective of value-based care should to be integrated into clinical prediction model development (cutpoint selection)

--

- CDSS which improve value-based are rare

--

- Prioritise clinical prediction model development

---

## Thank you

&lt;img src="www/twitter-logo.png" height = "4%" width = "4%"&gt;
@Rex_Parsons8

&lt;img src="www/github-logo.png" height = "4%" width = "4%"&gt;
@RWParsons

&lt;img src="www/website-icon.png" height = "4%" width = "4%"&gt;
[rwparsons.github.io/](https://rwparsons.github.io/)


&lt;img src="www/shiny_hex.png" height = "4%" width = "4%"&gt;
[aushsi.shinyapps.io/cost-effective-cpms-app/](https://aushsi.shinyapps.io/cost-effective-cpms-app/)

&lt;img src="www/hex.png" height = "4%" width = "4%"&gt;
[rwparsons.github.io/predictNMB/](https://rwparsons.github.io/predictNMB/)

Cost-effective cutpoints [github.com/RWParsons/cost-effective-cpms](https://github.com/RWParsons/cost-effective-cpms)

slides [rwparsons.github.io/PUB358-guest-lecture/](https://rwparsons.github.io/PUB358-guest-lecture/)


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
